function newUI(e,t){null==e&&(e="div");let n=document.createElement(e);return n.id=globalID++,n.style.position="absolute",n.style.caretColor="transparent",n.style.opacity=1,n.style.draggable="false",n.style.userSelect="none",null!=t&&t.appendChild(n),n}function changeUIStatus(e,t,n,l,i){e.style.left=t+"%",e.style.top=n+"%",e.style.width=l+"%",e.style.height=i+"%"}function newBackground(e,t,n,l,i,o,s,r,y){let a=newUI();return a.style.left=e+"%",a.style.top=t+"%",a.style.width=n+"%",a.style.height=l+"%",a.style.backgroundColor="rgba("+255*i+","+255*o+","+255*s+","+r+")",a.style.backgroundSize="100% 100%",a.style.backgroundRepeat="no-repeat",a.style.backgroundBlendMode="Overlay",y.appendChild(a),a}function newTexture(e,t,n,l,i,o,s){let r=newUI();return r.style.left=e+"%",r.style.top=t+"%",r.style.width=n+"%",r.style.height=l+"%",r.style.opacity=o,r.style.backgroundImage="url("+i+")",r.style.backgroundSize="100% 100%",r.style.backgroundRepeat="no-repeat",r.style.backgroundBlendMode="Overlay",r.style.pointerEvents="none",s.appendChild(r),r}function newText(e,t,n,l){let i=newUI();return i.style.position="relative",i.style.left=e+"%",i.style.top=t+"%",i.style.fontFamily=({EN:"Palatino Linotype",ZH:"KaiTi",JP:"UD Digi Kyokasho NP-R"})[LAN],i.style.fontSize=canvasHeight/747*100+"%",i.innerHTML=n,l.appendChild(i),i}function setTextSize(e,t){e.style.fontSize=canvasHeight/747*t+"%"}function newBButton(e,t,n,l,i,o,s,r,y,a,u){let d=newBackground(e,t,n,l,o,s,r,y,a);d.style.pointerEvents="auto",d.style.cursor="pointer",a.appendChild(d);let c=newText(0,0,i,d);return(c.style.textAlign="center",1==u)?[d,c]:d}function newTButton(e,t,n,l,i,o,s,r,y){let a=newTexture(e,t,n,l,o,s,r);a.style.pointerEvents="auto",a.style.cursor="pointer",r.appendChild(a);let u=newText(0,0,i,a);return(u.style.textAlign="center",1==y)?[a,u]:a}function newVideo(e,t,n,l,i,o){let s=newUI();s.style.overflow="hidden",s.style.left=e+"%",s.style.top=t+"%",s.style.width=n+"%",s.style.height=l+"%",s.style.aspectRatio="16/9";let r=newUI("iframe");r.src=i,r.setAttribute("allowfullscreen","allowfullscreen"),r.setAttribute("frameborder","0"),r.style.width="100%",r.style.height="100%",o.appendChild(s),s.appendChild(r);let y=newText(0,0,"Your browser doesn't support video",o);return r.appendChild(y),r}function setVisible(e,t){t?e.style.visibility="visible":e.style.visibility="hidden"}function setRotation(e,t){e.style.transform="rotate("+t+"deg)"}function destroy(e){e.remove()}function destroyAfter(e,t){let n=0,l=60*t;var i=function(){if(l==(n+=1)+1){destroy(e);return}requestAnimationFrame(i)};i()}function animateAlpha(e,t,n,l,i,o){isRunning=!0;let s=0,r=60*l;var y=function(){if((s+=1)==r+1){isRunning=!1,null!=o&&o();return}"easeOutCubic"==i?e.style.opacity=lerp1(t,n,1-Math.pow(1-s/r,3)):"easeInQuart"==i?e.style.opacity=lerp1(t,n,Math.pow(s/r,4)):e.style.opacity=lerp1(t,n,s/r),requestAnimationFrame(y)};y()}function animateTransform(e,t,n,l,i){isRunning=!0;let o=0,s=60*l;var r=function(){if((o+=1)==s+1){isRunning=!1,null!=i&&i();return}e.style.left=lerp1(t.x0,t.x1,o/s)+"%",e.style.top=lerp1(t.y0,t.y1,o/s)+"%",e.style.width=lerp1(n.x0,n.x1,o/s)+"%",e.style.height=lerp1(n.y0,n.y1,o/s)+"%",requestAnimationFrame(r)};r()}function animatePingpong(e,t,n){let l=!0,i=60*n/2,o=60*n;var s=function(){e.style.left=lerp1(t.x0,t.x1,i/o)+"%",e.style.top=lerp1(t.y0,t.y1,i/o)+"%",(i+=l?1:-1)==o+1&&l&&(l=!1),-1!=i||l||(l=!0),requestAnimationFrame(s)};s()}function IMG_PRELOAD(e){new Image().src=e}
