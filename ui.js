function newUI(e,t){null==e&&(e="div");let n=document.createElement(e);return n.id=globalID++,n.style.position="absolute",n.style.caretColor="transparent",n.style.opacity=1,n.style.draggable="false",n.style.userSelect="none",null!=t&&t.appendChild(n),n}function changeUIStatus(e,t,n,l,i){e.style.left=t+"%",e.style.top=n+"%",e.style.width=l+"%",e.style.height=i+"%"}function newBackground(e,t,n,l,i,o,r,s,a){let u=newUI();return u.style.left=e+"%",u.style.top=t+"%",u.style.width=n+"%",u.style.height=l+"%",u.style.backgroundColor="rgba("+255*i+","+255*o+","+255*r+","+s+")",u.style.backgroundSize="100% 100%",u.style.backgroundRepeat="no-repeat",u.style.backgroundBlendMode="Overlay",a.appendChild(u),u}function newTexture(e,t,n,l,i,o,r){let s=newUI();return s.style.left=e+"%",s.style.top=t+"%",s.style.width=n+"%",s.style.height=l+"%",s.style.opacity=o,s.style.backgroundImage="url("+i+")",s.style.backgroundSize="100% 100%",s.style.backgroundRepeat="no-repeat",s.style.backgroundBlendMode="Overlay",s.style.pointerEvents="none",r.appendChild(s),s}function newText(e,t,n,l){let i=newUI();i.style.position="relative",i.style.left=e+"%",i.style.top=t+"%";return i.style.fontFamily={EN:"Palatino Linotype",ZH:"KaiTi",JP:"UD Digi Kyokasho NP-R"}[LAN],i.style.fontSize=canvasHeight/747*100+"%",i.innerHTML=n,l.appendChild(i),i}function setTextSize(e,t){e.style.fontSize=canvasHeight/747*t+"%"}function newBButton(e,t,n,l,i,o,r,s,a,u,y){let d=newBackground(e,t,n,l,o,r,s,a,u);d.style.pointerEvents="auto",d.style.cursor="pointer",u.appendChild(d);let p=newText(0,0,i,d);return p.style.textAlign="center",1==y?[d,p]:d}function newTButton(e,t,n,l,i,o,r,s,a){let u=newTexture(e,t,n,l,o,r,s);u.style.pointerEvents="auto",u.style.cursor="pointer",s.appendChild(u);let y=newText(0,0,i,u);return y.style.textAlign="center",1==a?[u,y]:u}function newVideo(e,t,n,l,i,o){let r=newUI();r.style.overflow="hidden",r.style.left=e+"%",r.style.top=t+"%",r.style.width=n+"%",r.style.height=l+"%",r.style.aspectRatio="16/9";let s=newUI("iframe");s.src=i,s.setAttribute("allowfullscreen","allowfullscreen"),s.setAttribute("frameborder","0"),s.style.width="100%",s.style.height="100%",o.appendChild(r),r.appendChild(s);let a=newText(0,0,"Your browser doesn't support video",o);return s.appendChild(a),s}function setVisible(e,t){e.style.visibility=t?"visible":"hidden"}function setRotation(e,t){e.style.transform="rotate("+t+"deg)"}function destroy(e){e.remove()}function destroyAfter(e,t){let n=0,l=60*t;var i=function(){l!=(n+=1)+1?requestAnimationFrame(i):destroy(e)};i()}function animateAlpha(e,t,n,l,i,o){isRunning=!0;let r=0,s=60*l;var a=function(){if((r+=1)==s+1)return isRunning=!1,void(null!=o&&o());e.style.opacity="easeOutCubic"==i?lerp1(t,n,1-Math.pow(1-r/s,3)):"easeInQuart"==i?lerp1(t,n,Math.pow(r/s,4)):lerp1(t,n,r/s),requestAnimationFrame(a)};a()}function animateTransform(e,t,n,l,i){isRunning=!0;let o=0,r=60*l;var s=function(){if((o+=1)==r+1)return isRunning=!1,void(null!=i&&i());e.style.left=lerp1(t.x0,t.x1,o/r)+"%",e.style.top=lerp1(t.y0,t.y1,o/r)+"%",e.style.width=lerp1(n.x0,n.x1,o/r)+"%",e.style.height=lerp1(n.y0,n.y1,o/r)+"%",requestAnimationFrame(s)};s()}function IMG_PRELOAD(e){(new Image).src=e}