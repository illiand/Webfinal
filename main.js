var root,mainContent,bgArr,bgTagArr,partsElement,UICanvas,canvasHeight,canvasWidth,websiteBGLayout,connectBackground,helperLayout,mapLayout,recorderText,manHolder,globalID=1,offFocusStength=.5,LAN="EN",mainContentA=1,p=[,,,],isMouseDown=!1,mouseDownRingType=-1,mouseX=0,mouseY=0,size=50,h0r=.00167*size,h1r=.0026*size,h2r=.0036*size,out=.00494*size,mainContentT=0,mainContentB=.741,mainContentL=-.569,mainContentR=.545,isMasking=!1,curCardID=1,websiteBG=[,,],backgroundStatus=1,websiteBGInChanging=!1,connectText=Array(9),helperText=[,,,],WEB_CURRENT_TIME="2025/01/28",curDepth=WEB_CURRENT_TIME,worldTime=0,worldTargetTime=0,moveSpeed=1,downSpeed=.2,groundDepth=17.5,daySkippingSpeedMax=100,weighterTargetHeight=[],recorderShowType=2;function main(){initAllIMG(),root=document.getElementById("root"),canvasHeight=window.innerHeight,canvasWidth=window.innerWidth,newTexture(0,0,100,100,"AllWhite.png",1,root),websiteBGLayout=newUI(null,root),changeUIStatus(websiteBGLayout,0,0,100,100),websiteBG[0]=newTexture(0,0,100,100,"bgIMG2.png",1,websiteBGLayout),websiteBG[1]=newTexture(0,0,100,100,"bgIMG2.png",1,websiteBGLayout),helperLayout=newUI(null,root),changeUIStatus(helperLayout,0,0,100,100),mainContent=newUI(null,root),changeUIStatus(mainContent,0,0,100,100),UICanvas=newUI(null,root),changeUIStatus(UICanvas,0,0,100,100),UICanvas.style.pointerEvents="none",init(),initPartsElementOnCard(),initRashinban(),initMouseRashinbanAniamtion(),initMainContentAnimation(),initUICanvasAnimation(),initMap(),initTitle(),initLANChange(),initConnectLayout(),setVisible(p[1].layout,!1),setVisible(p[2].layout,!1),setVisible(mainContent,!1),rashinbanJumpTo([0]),LANSwitch()}async function init(){bgArr=[,,,,],bgTagArr=[,,,,];let e=["Overview","Scene","Video","Comment"];for(let t=0;t<bgArr.length;t+=1){let n=newTexture(20+1*t,13-1*t,50,65,"bgIMG2.png",1,mainContent);n.style.boxShadow="0px 0px 20px 10px rgba(0,0,0,0.5)",n.style.pointerEvents="auto",n.style.userSelect="none";let a=newTButton(7.5*t,-10,10,15,e[t],"bookmark2.png",1,n);a.children[0].style.top="40%",bgArr[t]=n,bgTagArr[t]=a,a.onclick=function(){let e=t;for(let n=0;n<bgArr.length;n+=1)n<e?(changeUIStatus(bgArr[n],20+1*n+1*bgArr.length,13-(1*n+1*bgArr.length),50,65),changeUIStatus(bgTagArr[n],90-7.5*n,-10,10,15)):(changeUIStatus(bgArr[n],20+1*n,13-1*n,50,65),changeUIStatus(bgTagArr[n],7.5*n,-10,10,15),bgTagArr[n].style.transform="scaleX(1)");for(let a=e;a>=0;a-=1)mainContent.appendChild(bgArr[a]);for(let i=bgArr.length-1;i>=e;i-=1)mainContent.appendChild(bgArr[i]);0==e?partsElement.overview.pic.style.visibility="inherit":partsElement.overview.pic.style.visibility="hidden"}}rearrangeOrder()}function rearrangeOrder(){for(let e=0;e<bgArr.length;e+=1)mainContent.appendChild(bgArr[bgArr.length-e-1]);for(let t=0;t<bgArr.length;t+=1)changeUIStatus(bgArr[t],20+1*t,13-1*t,50,65),changeUIStatus(bgTagArr[t],7.5*t,-10,10,15),bgTagArr[t].style.transform="scaleX(1)"}function initPartsElementOnCard(){let e=bgArr[0].offsetWidth/bgArr[0].offsetHeight;partsElement={overview:{pic:newTexture(75,0,25,25*e,"RadialBlur/title.png",1,bgArr[0]),title:newText(-12.5,12.5,"Radial Blur",bgArr[0]),text:newText(5,35,"<p>Radial blur is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>",bgArr[0])},scene:[{pic:newTButton(12.5,12.5,32,20*e,"","RadialBlur/title.png",1,bgArr[1]),title:newText(0,-20,"Radial Blur",bgArr[1]),text:"<p>Radial blur 1 is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>"},{pic:newTButton(55.5,12.5,32,20*e,"","RadialBlur/title.png",1,bgArr[1]),title:newText(0,-20,"Radial Blur",bgArr[1]),text:"<p>Radial blur 2 is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>"},{pic:newTButton(12.5,85-20*e,32,20*e,"","RadialBlur/title.png",1,bgArr[1]),title:newText(0,-20,"Radial Blur",bgArr[1]),text:"<p>Radial blur 3 is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>"},{pic:newTButton(55.5,85-20*e,32,20*e,"","RadialBlur/title.png",1,bgArr[1]),title:newText(0,-20,"Radial Blur",bgArr[1]),text:"<p>Radial blur 4 is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>"}],video:{link:newVideo(17.5,15,65,65/1920*1080*e,"",bgArr[2]),text:newText(0,15+65/1920*1080*e+10,"An animation using hammer to illustate the radial blur's effect",bgArr[2])},comment:newText(10,10,"<p>Radial blur is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>",bgArr[3])},setTextSize(partsElement.overview.title,300),partsElement.overview.title.style.textAlign="center",partsElement.overview.text.style.maxWidth="90%",setTextSize(partsElement.overview.text,120);for(let t=0;t<4;t+=1)partsElement.scene[t].pic.appendChild(partsElement.scene[t].title),partsElement.scene[t].pic.onclick=function(){isMasking=!0;let e=newBackground(0,0,100,100,0,0,0,0,root),n=newTButton(0,0,100,100,"","AllBlack.png",.8,e);n.style.cursor="auto",n.onclick=function(){destroy(e),isMasking=!1},newTButton(96,2,1.5,1.5*canvasWidth/canvasHeight,"","Batsu2.png",1,e),e.onclick=function(){destroy(e),isMasking=!1};newTexture(5,(100-35*canvasWidth/canvasHeight)/2,56,35*canvasWidth/canvasHeight,partsElement.scene[t].pic.style.backgroundImage.substring(4,partsElement.scene[t].pic.style.backgroundImage.length-1),1,e);let a=newTexture(66,(100-35*canvasWidth/canvasHeight)/2,25,35*canvasWidth/canvasHeight,"bgIMG2.png",1,e),i=newText(0,7,partsElement.scene[t].title.innerHTML,a);i.style.textAlign="center",setTextSize(i,150);newText(10,15,partsElement.scene[t].text,a).style.maxWidth="80%"},partsElement.scene[t].title.style.textAlign="center",setTextSize(partsElement.scene[t].title,120),partsElement.video.text.style.textAlign="center",setTextSize(partsElement.video.text,.5/(partsElement.video.text.offsetWidth/canvasWidth)*100),partsElement.video.text.style.whiteSpace="nowrap",partsElement.comment.style.maxWidth="80%"}function drawCard(e){partsElement.overview.pic.style.backgroundImage="url("+e.overview.pic+")",partsElement.overview.pic.style.visibility="inherit",partsElement.overview.title.innerHTML=e.overview.title,partsElement.overview.text.innerHTML=e.overview.text;for(let t=0;t<4;t+=1){if(t<e.scene.length)partsElement.scene[t].pic.style.visibility="inherit",partsElement.scene[t].title.style.visibility="inherit";else{partsElement.scene[t].pic.style.visibility="hidden",partsElement.scene[t].title.style.visibility="hidden";continue}partsElement.scene[t].pic.style.backgroundImage="url("+e.scene[t].pic+")",partsElement.scene[t].title.innerHTML=e.scene[t].title,partsElement.scene[t].text=e.scene[t].text}partsElement.video.link.src=e.video.link,partsElement.video.text.innerHTML=e.video.text,partsElement.comment.innerHTML=e.comment}function initRashinban(){pIn=newTexture(50-size/canvasWidth*canvasHeight/2,100-size/2-0,size/canvasWidth*canvasHeight,size,"羅針盤/羅針盤in2.png",.8,root),p[0]={layout:newTexture(50-size/canvasWidth*canvasHeight/2,100-size/2-0,size/canvasWidth*canvasHeight,size,"羅針盤/羅針盤0h2.png",.8,root),degree:0,curTag:"",tag:null,accSpeed:0,a:.8},p[1]={layout:newTexture(50-size/canvasWidth*canvasHeight/2,100-size/2-0,size/canvasWidth*canvasHeight,size,"羅針盤/羅針盤1h2.png",.8,UICanvas),degree:0,curTag:"",tag:null,accSpeed:0,a:.8},p[2]={layout:newTexture(50-size/canvasWidth*canvasHeight/2,100-size/2-0,size/canvasWidth*canvasHeight,size,"羅針盤/羅針盤2h2.png",.8,UICanvas),degree:0,curTag:"",tag:null,accSpeed:0,a:.8};let e=0,t=0,n=0,a=0,i=0,o=-1;onmousedown=function($){if(isMasking)return;void 0!=$.touches&&($=$.touches[0]),isMouseDown=!0,n=($.clientX-canvasWidth/2)/canvasWidth/.5/1536*canvasWidth,a=$.clientY/canvasHeight,e=n,t=a;let r=distance(n,a,0,1);h0r<r&&r<h1r?o=0:h1r<r&&r<h2r?o=1:h2r<r&&r<out&&(o=2),p[o].accSpeed=0,i=p[o].degree,mouseDownRingType=o},onmousemove=function(e){if(isMasking||(void 0!=e.touches&&(e=e.touches[0]),mouseX=(e.clientX-canvasWidth/2)/canvasWidth/.5/1536*canvasWidth,mouseY=e.clientY/canvasHeight,-1==o||"hidden"==p[o].layout.style.visibility))return;distance(mouseX,mouseY,0,1);let t=180*Math.atan2(1-a,0-n)/Math.PI,i=180*Math.atan2(1-mouseY,0-mouseX)/Math.PI,$=p[o].degree;p[o].degree=clamp(p[o].degree+(i<0&&t>0||i>0&&t<0?i+t:i-t),-(45*p[o].tag.length),0),p[o].layout.style.transform="rotate("+p[o].degree+"deg)",n=mouseX,a=mouseY,worldTargetTime+=Math.abs(p[o].degree-$)/360*100*moveSpeed,rashinbanDetector(o)},onmouseup=function(n){if(isMasking)return;void 0!=n.touches&&(n=n.touches[0]);let a=Math.abs(e-(n.clientX-canvasWidth/2)/canvasWidth/.5/1536*canvasWidth),$=Math.abs(t-n.clientY/canvasHeight);if(0!=p[o].accSpeed)p[o].accSpeed=0;else if(a<.005&&$<.005&&-1!=o&&"hidden"!=p[o].layout.style.visibility){let r=90-180*Math.atan2(1-t,0-e)/Math.PI;-(45*p[o].tag.length)<=p[o].degree+r&&p[o].degree+r<=0&&(p[o].degree+=r,p[o].layout.style.transform="rotate("+p[o].degree+"deg)",rashinbanDetector(o))}else p[o].accSpeed=(p[o].degree-i)*.5;o=-1,isMouseDown=!1,mouseDownRingType=-1};var $=function(){-1!=o&&(i=p[o].degree);for(var e=0;e<p.length;e++)if(0!=p[e].accSpeed){let t=.0167*10;p[e].degree=clamp(p[e].degree+p[e].accSpeed,-(45*p[e].tag.length),0),p[e].layout.style.transform="rotate("+p[e].degree+"deg)",p[e].accSpeed=p[e].accSpeed+(p[e].accSpeed>0?-t:t),rashinbanDetector(e),(Math.abs(p[e].accSpeed)<t||-(45*p[e].tag.length)==p[e].degree||0==p[e].degree)&&(p[e].accSpeed=0)}requestAnimationFrame($)};$(),ontouchstart=onmousedown,ontouchmove=onmousemove,ontouchend=onmouseup,drawNameTagOnRing(0,getData())}function rashinbanDetector(e){let t=getData();for(let n=0;n<e;n+=1)t=t[Math.floor(Math.abs(p[n].degree)/45)].data,setVisible(p[n+1].layout,!0);for(let a=e;a<p.length;a+=1)if(1.8<Math.abs(p[a].degree)%45&&Math.abs(p[a].degree)%45<43.2){let i=Math.floor(Math.abs(p[a].degree)/45);if(p[a].curTag==t[i].name){for(let o=a;o<p.length-1&&"hidden"!=p[o+1].layout.style.visibility;o+=1)Math.abs(p[o].degree)%45<10?p[o+1].layout.style.opacity=lerp1(0,.8,(Math.abs(p[o].degree)%45-1.8)/10)*p[o].a/.8:35<Math.abs(p[o].degree)%45?p[o+1].layout.style.opacity=lerp1(.8,0,(Math.abs(p[o].degree)%45-35)/8.2)*p[o].a/.8:p[o+1].layout.style.opacity=p[o].a,p[o+1].a=parseFloat(p[o+1].layout.style.opacity);t[i].isACard&&(Math.abs(p[a].degree)%45<10?mainContent.style.opacity=lerp1(0,.6,(Math.abs(p[a].degree)%45-1.8)/10)*p[a].a/.8:35<Math.abs(p[a].degree)%45?mainContent.style.opacity=lerp1(.6,0,(Math.abs(p[a].degree)%45-35)/8.2)*p[a].a/.8:mainContent.style.opacity=.6,mainContentA=parseFloat(mainContent.style.opacity));return}p[a].curTag=t[i].name;for(let $=a;$<p.length-1;$+=1)p[$+1].degree=0,p[$+1].layout.style.transform="rotate(0deg)",setVisible(p[$+1].layout,!1);t[i].isACard?t[i].isAMessage?curCardID!=t[i].cardID&&("Intro"==t[i].name&&(backgroundChanges("bgIMG2.png"),animateAlpha(helperLayout,0,1,1)),"Connect"==t[i].name&&(connectBackground.style.visibility="visible"),curCardID=t[i].cardID):(setVisible(mainContent,!0),curCardID!=t[i].cardID&&(curCardID=t[i].cardID,rearrangeOrder(),drawCard(t[i].data),backgroundChanges(t[i].data.background))):(p[a+1].degree=0,p[a+1].layout.style.transform="rotate(0deg)",setVisible(p[a+1].layout,!0),setVisible(mainContent,!1),drawNameTagOnRing(a+1,t[i].data)),helperLayout.style.visibility="Intro"==t[i].name?"inherit":"hidden",connectBackground.style.visibility="Connect"==t[i].name?"visible":"hidden";let r=dateDistance(curDepth,t[i].depth);worldTargetTime+=parseFloat(Math.abs(r))*downSpeed,curDepth="N/A"==t[i].depth?curDepth:t[i].depth,weighterTargetHeight.push(parseFloat(r)),t=t[i].data}else{p[a].curTag="",setVisible(mainContent,!1);for(let l=a;l<p.length-1;l+=1)p[l+1].degree=0,p[l+1].layout.style.transform="rotate(0deg)",setVisible(p[l+1].layout,!1);break}for(let s=e;s<p.length;s+=1)for(let g=0;null!=p[s].tag&&g<p[s].tag.length;g+=1)g==Math.floor(Math.abs(p[s].degree)/45)&&1.8<Math.abs(p[s].degree)&&Math.abs(p[s].degree)%45<43.2?p[s].tag[g].style.color="rgb(0, 0, 0, 1)":p[s].tag[g].style.color="rgb(0, 0, 0, 0.5)"}function backgroundChanges(e){if(websiteBGInChanging){-1==backgroundStatus?websiteBG[0].style.backgroundImage='url("'+e+'")':websiteBG[1].style.backgroundImage='url("'+e+'")';return}websiteBGInChanging=!0;let t=1==backgroundStatus?websiteBG[0]:websiteBG[1],n=1==backgroundStatus?websiteBG[1]:websiteBG[0];t.style.backgroundImage="url("+e+")",websiteBGLayout.appendChild(t),animateAlpha(n,1,0,.75,"easeInQuart",function(){n.style.backgroundImage='url("")',n.style.opacity=1,websiteBGInChanging=!1}),animateTransform(t,{x0:0,x1:0,y0:100,y1:0},{x0:100,x1:100,y0:100,y1:100},.75),backgroundStatus=-backgroundStatus}function drawNameTagOnRing(e,t){if(null!=p[e].tag){for(let n=0;n<p[e].tag.length;n+=1)destroy(p[e].tag[n]);p[e].tag=null}let a=0;a=0==e?.235:1==e?.3525:.48,p[e].tag=Array(t.length);for(let i=0;i<t.length;i+=1){let o=91.06*a,$=o*Math.cos(toRadians(90-(10+45*i)))+50.5,r=-o*Math.sin(toRadians(90-(10+45*i)))+47.5,l=newText($,r,"<b>"+t[i].showName+"</b>",p[e].layout);l.style.position="absolute",l.style.transformOrigin="0%",l.style.transform="rotate("+(22.5+45*i)+"deg)",l.style.whiteSpace="nowrap";let s=canvasHeight/747;setTextSize(l,Math.min(4050/l.clientWidth*s*(1+.45*e),90*(1+.05*e))),p[e].tag[i]=l,p[e].tag[i].text=t[i].name}}function initMouseRashinbanAniamtion(){if(isMasking)return;let e=[,,,];var t=function(){e=[!1,!1,!1];let n=distance(mouseX,mouseY,0,1),a=-1;-1!=mouseDownRingType?a=mouseDownRingType:h0r<n&&n<h1r?a=0:h1r<n&&n<h2r?a=1:h2r<n&&n<out&&(a=2),-1!=a&&"hidden"!=p[a].layout.style.visibility&&(e[a]=!0);for(let i=0;i<e.length;i+=1)"hidden"!=p[i].layout.style.visibility&&(e[i]?p[i].layout.style.opacity=Math.min(parseFloat(p[i].layout.style.opacity)+.05,.8):p[i].layout.style.opacity=Math.max(parseFloat(p[i].layout.style.opacity)-.05,p[i].a));requestAnimationFrame(t)};t()}function initMainContentAnimation(){var e=function(){mainContentL<=mouseX&&mouseX<=mainContentR&&mainContentT<=mouseY&&mouseY<=mainContentB?mainContent.style.opacity=Math.min(parseFloat(mainContent.style.opacity)+.05,1):mainContent.style.opacity=Math.max(parseFloat(mainContent.style.opacity)-.05,mainContentA),requestAnimationFrame(e)};e()}function initUICanvasAnimation(){var e=function(){mainContentL<=mouseX&&mouseX<=mainContentR&&mainContentT<=mouseY&&mouseY<=mainContentB?UICanvas.style.opacity=Math.max(parseFloat(UICanvas.style.opacity)-.05,.25):UICanvas.style.opacity=Math.min(parseFloat(UICanvas.style.opacity)+.05,1),requestAnimationFrame(e)};e()}function initMap(){mapLayout=newUI(null,UICanvas),changeUIStatus(mapLayout,85,20,15,70),mapLayout.style.overflow="hidden",mapLayout.style.boxShadow="0px 0px 20px 10px rgba(0, 0, 0, 0.5)";let e=mapLayout.offsetWidth/mapLayout.offsetHeight;initBackground(),newTexture(34,17,70,70*e,"hill2.png",1,mapLayout),initShortcutOnMap(),initDepthMarker(),initHouseAndFan(),initDepthRecorder()}function initBackground(){let e=newUI(null,mapLayout),t=mapLayout.offsetWidth/mapLayout.offsetHeight;changeUIStatus(e,0,0,100,100);let n=newTexture(0,0,100,100,"DayMorning.png",1,e),a=newTexture(0,0,100,100,"DayNight.png",1,e);a.style.opacity=0;let i=newTexture(5,5,12.5,12.5*t,"Sun2.png",1,e),o=newTexture(5,5,12.5,12.5*t,"Moon2.png",1,e);o.style.opacity=0;var $=function(){let t=worldTime%100;0<t&&t<5?(i.style.opacity=1,n.style.opacity=1,a.style.opacity=0):45<t&&t<50?(n.style.opacity=lerp1(1,0,(t-45)/5),a.style.opacity=lerp1(0,1,(t-45)/5),i.style.opacity=0,e.appendChild(a),e.appendChild(o)):50<t&&t<55?(o.style.opacity=1,n.style.opacity=0,a.style.opacity=1):95<t&&t<100&&(n.style.opacity=lerp1(0,1,(t-95)/5),a.style.opacity=lerp1(1,0,(t-95)/5),o.style.opacity=0,e.appendChild(n),e.appendChild(i)),worldTime!=worldTargetTime&&(worldTime=Math.min(worldTime+daySkippingSpeedMax/60,worldTargetTime)),i.style.top=getSunMoonHeight(t%50)+"%",i.style.left=lerp1(0,100,t%50/50)+"%",o.style.top=getSunMoonHeight(t%50)+"%",o.style.left=lerp1(0,100,t%50/50)+"%",worldTargetTime+=.05,requestAnimationFrame($)};$()}function initHouseAndFan(){let e=mapLayout.offsetWidth/mapLayout.offsetHeight;newTexture(55,groundDepth-35*e/2,25,25*e,"fanhouse2.png",1,mapLayout);let t=newTexture(55,groundDepth-25*e,25,25*e,"fanhouse_fan2.png",1,mapLayout),n=0,a=0;newTexture(25,.9*(groundDepth-30*e/2),30,30*e,"weighter2.png",1,mapLayout).style.transform="scaleX(-1)";let i=newTexture(22.5,groundDepth-7.25*e,10,7.25*e,"rope2.png",1,mapLayout),o=newTexture(24.5,groundDepth,6,6*e,"man12.png",1,mapLayout);manHolder=newTexture(22.5,groundDepth,10,10*e,"manholder2.png",1,mapLayout);var $=function(){n+=.25,t.style.transform="rotate("+n+"deg)";let r=0;if(weighterTargetHeight.length>0){let l=daySkippingSpeedMax/downSpeed/60;r=weighterTargetHeight[0]<0?-Math.min(Math.abs(weighterTargetHeight[0]),l):Math.min(Math.abs(weighterTargetHeight[0]),l),weighterTargetHeight[0]=weighterTargetHeight[0]<0?Math.min(weighterTargetHeight[0]+l,0):Math.max(weighterTargetHeight[0]-l,0),0==weighterTargetHeight[0]&&weighterTargetHeight.splice(0,1)}let s=parseFloat(manHolder.style.top)-r/1e4*(100-groundDepth);i.style.height=(1+(s-groundDepth)/(7.25*e))*(7.25*e)+"%",manHolder.style.top=s+"%",o.style.top=s+6*e*.25+"%",a%2<1?o.style.backgroundImage="url(man12.png)":o.style.backgroundImage="url(man22.png)",a+=.0167,requestAnimationFrame($)};$()}function initDepthMarker(){let e=groundDepth,t=[,,,,,];t[0]=newText(5,e,"— &nbsp0000",mapLayout),setTextSize(t[0],60),t[0].style.color="rgba(0, 0, 0, 0.5)";for(let n=1;n<=4;n+=1)e+=(80-groundDepth)/5,t[n]=newText(5,e,"— "+-2e3*n,mapLayout),setTextSize(t[n],75),t[n].style.color="rgba(0, 0, 0, 0.5)";var a=function(){let e=worldTime%100;if(95<e&&e<100){let n=lerp3({x:0,y:1,z:0},{x:0,y:0,z:0},(e-95)/5);for(let i=0;i<=4;i+=1)t[i].style.color="rgba("+255*n.x+", "+255*n.y+", "+255*n.z+", 0.5)"}else if(0<e&&e<40)for(let o=0;o<=4;o+=1)t[o].style.color="rgba(0, 0, 0, 0.5)";else if(45<e&&e<50){let $=lerp3({x:0,y:0,z:0},{x:0,y:1,z:0},(e-45)/5);for(let r=0;r<=4;r+=1)t[r].style.color="rgba("+255*$.x+", "+255*$.y+", "+255*$.z+", 0.5)"}else if(50<e&&e<90)for(let l=0;l<=4;l+=1)t[l].style.color="rgba(0, 255, 0, 0.5)";requestAnimationFrame(a)};a()}function initDepthRecorder(){let e=newBackground(85,10,15,10,1,1,1,1,UICanvas);e.style.boxShadow="0px 0px 20px 10px rgba(0,0,0,0.5)",recorderText=newText(2,2,"Content's Publish Date:",e),setTextSize(recorderText,90);let t=Array(10),n=Array(10),a=WEB_CURRENT_TIME;for(let i=0;i<10;i+=1)t[i]=newTexture(5.5+9*i,40,8,50,"DepthRecorder.png",1,e),n[i]=newText(0,22.5,a[i],t[i]),n[i].style.textAlign="center",n[i].style.color="rgb(0, 0, 0)";let o={EN:"Current Depth:",ZH:"当前深度：",JP:"深さ："},$={EN:"Content's Publish Date:",ZH:"内容的发表日期：",JP:"内容の発表日："},r="   00000 M",l="";var s=function(){let t=worldTime%100;if(95<t&&t<100){let a=lerp3({x:37,y:61,z:168},{x:255,y:255,z:255},(t-95)/5),i=lerp3({x:0,y:255,z:0},{x:0,y:0,z:0},(t-95)/5);e.style.backgroundColor="rgb("+a.x+", "+a.y+", "+a.z+")",recorderText.style.color="rgb("+i.x+", "+i.y+", "+i.z+")"}else if(0<t&&t<40)e.style.backgroundColor="rgb(255, 255, 255)",recorderText.style.color="rgb(0, 0, 0)";else if(45<t&&t<50){let g=lerp3({x:255,y:255,z:255},{x:37,y:61,z:168},(t-45)/5),c=lerp3({x:0,y:0,z:0},{x:0,y:255,z:0},(t-45)/5);e.style.backgroundColor="rgb("+g.x+", "+g.y+", "+g.z+")",recorderText.style.color="rgb("+c.x+", "+c.y+", "+c.z+")"}else 50<t&&t<90&&(e.style.backgroundColor="rgb(37, 61, 168)",recorderText.style.color="rgb(0, 255, 0)");let _=parseInt(lerp1(0,1e4,(parseFloat(manHolder.style.top)-groundDepth)/(100-groundDepth))),d=(_+"").length;for(let u=d;u<5;u+=1)_="0"+_;if(r="00000"==_?"   "+_+" M":"  -"+_+" M",l=curDepth,1==recorderShowType)for(let y=0;y<10;y+=1)recorderText.innerHTML=o[LAN],n[y].innerHTML=r.charAt(y),n[y].style.color="rgb(0, 0, 0)";else for(let h=0;h<10;h+=1)recorderText.innerHTML=$[LAN],n[h].innerHTML=l.charAt(h),n[h].style.color="rgb(0, 0, 0)";requestAnimationFrame(s)};s();newTButton(0,0,100,100,"","AllWhite.png",0,e).onclick=function(){recorderShowType=1==recorderShowType?2:1}}function initShortcutOnMap(){let e=mapLayout.offsetWidth/mapLayout.offsetHeight,t=(100-groundDepth)/20/e,n=[],a=getData(),i=[];for(let o=0;o<a.length;o+=1)i.push({content:a[o],jumpStringIndex:o+""});for(;0!=i.length;){let $=i.splice(i.length-1,1)[0],r=$.content,l=$.jumpStringIndex;if("N/A"==r.depth){if(Array.isArray(r.data))for(let s=0;s<r.data.length;s+=1)i.push({content:r.data[s],jumpStringIndex:l+s})}else{if(0==n.length){n.push({content:r,jumpStringIndex:l});continue}for(let g=0;g<n.length;g+=1){if(0>parseFloat(dateDistance(r.depth,n[g].content.depth))){n.splice(g,0,{content:r,jumpStringIndex:l});break}if(g==n.length-1){n.push({content:r,jumpStringIndex:l+g});break}}}}for(let c=0,_=0;c<=15&&_<n.length;c+=1){let d=Math.abs(parseFloat(getDepth(n[_].content.depth)));for(let u=0;c<2&&u<1||c>=2&&u<4;u+=1){if(_==n.length)return;if(666.6666666666666*c<=d&&d<(c+1)*666.6666666666666){let y=lerp1(groundDepth,100,Math.abs(parseFloat(getDepth(n[_].content.depth)))/1e4),h=newTButton(25+15*u,y,t,t*e,"",n[_].content.data.overview.pic,1,mapLayout),m=_;h.onclick=function(){let e=[];for(let t=0;t<n[m].jumpStringIndex.length;t+=1)e.push(n[m].jumpStringIndex.charAt(t));rashinbanJumpTo(e)},_+=1}else break}}}function rashinbanJumpTo(e){for(let t=0;t<e.length;t+=1)p[t].degree=-(22.5+45*e[t]),p[t].layout.style.transform="rotate("+p[t].degree+"deg)",rashinbanDetector(t);for(let n=0;n<3;n+=1)p[n].a=.8}function initTitle(){let e=newTexture(0,0,15,18,"bgIMG2.png",.5,root);newTexture(0,0,15,18,"title2.png",1,root),e.style.boxShadow="0px 0px 20px 10px rgba(0,0,0,0.25)";let t=newTexture(0,96.5,13/canvasWidth*1080,3.5,"AllBlack.png",1,root),n=newText(0,0,"&copy; 2023-2025 Ili",t);n.style.position="absolute",n.style.color="rgba(255, 255, 0, 1)",n.style.whiteSpace="nowrap",setTextSize(n,100);let a=newTexture(65,20,20,37.5,"panal2.png",.7,helperLayout),i=newTexture(35,57.5,30,20,"panal3.png",.7,helperLayout),o=newTexture(25,20,30,20,"",1,helperLayout),$=newText(0,0,"<p>Welcome to Abyss of Ili!</p><p>As a cave raider, you will go down into the cave to explore the unknowns.</p><p>The door is open for you. Come and enjoy your life in Abyss of Ili!</p>",o);setTextSize($,120);let r=newTexture(40,60,20,20,"",1,helperLayout),l=newText(0,0,"※ <u>Rotate</u>(<u>Drag</u>) or <u>Click</u> the ring on the compass to go to each page in this website",r);setTextSize(l,100),l.style.color="rgb(0, 200, 0)";let s=newTexture(67.5,35,12.5,10,"",1,helperLayout),g=newText(0,0,"※ You can <u>click</u> the small Icon on the Menu map to <u>DIRECTLY</u> go to each content",s);setTextSize(g,100),g.style.color="rgb(0, 200, 0)",helperText[0]=$,helperText[1]=l,helperText[2]=g,newTexture(85.875,3,13.5,6,"Menu2.png",1,UICanvas);let c=newTexture(74,49.5,3,3*canvasWidth/canvasHeight,"man12.png",.5,helperLayout),_=0;var d=function(){_%2<1?c.style.backgroundImage="url(man12.png)":c.style.backgroundImage="url(man22.png)",e.style.backgroundImage=p[0].degree>-45?"":"url(bgIMG2.png)",_+=.0167,requestAnimationFrame(d)};animatePingpong(a,{x0:63,x1:64,y0:20,y1:20},3),animatePingpong(s,{x0:65.5,x1:66.5,y0:26.5,y1:26.5},3),animatePingpong(c,{x0:77,x1:78,y0:42.5,y1:42.5},3),animatePingpong(i,{x0:35,x1:35,y0:65,y1:66},1),animatePingpong(r,{x0:40,x1:40,y0:67,y1:68},1),d()}function initLANChange(){let e=newBackground(0,20,10,5,.87,.87,0,.5,root);e.style.boxShadow="0px 0px 20px 10px rgba(0,0,0,0.2)",newTexture(0,0,100,100,"Lan2.png",1,newBackground(2,20,15,60,.5,.5,0,1,e));let t=newBButton(21,0,26,100,"Eng",.87,.87,0,1,e),n=newBButton(47,0,26,100,"中",.87,.87,0,1,e),a=newBButton(73,0,26,100,"日",.87,.87,0,1,e);t.children[0].style.top="20%",n.children[0].style.top="27%",a.children[0].style.top="27%",t.children[0].style.fontFamily="Palatino Linotype",n.children[0].style.fontFamily="KaiTi",a.children[0].style.fontFamily="UD Digi Kyokasho NP-R",t.onclick=function(){t.children[0].style.color="rgba(0, 0, 0, 1)",n.children[0].style.color="rgba(0, 0, 0, 0.2)",a.children[0].style.color="rgba(0, 0, 0, 0.2)",LAN="EN",LANSwitch()},n.onclick=function(){t.children[0].style.color="rgba(0, 0, 0, 0.2)",n.children[0].style.color="rgba(0, 0, 0, 1)",a.children[0].style.color="rgba(0, 0, 0, 0.2)",LAN="ZH",LANSwitch()},a.onclick=function(){t.children[0].style.color="rgba(0, 0, 0, 0.2)",n.children[0].style.color="rgba(0, 0, 0, 0.2)",a.children[0].style.color="rgba(0, 0, 0, 1)",LAN="JP",LANSwitch()},"zh-CN"==navigator.language||"zh"==navigator.language?(t.children[0].style.color="rgba(0, 0, 0, 0.2)",n.children[0].style.color="rgba(0, 0, 0, 1)",a.children[0].style.color="rgba(0, 0, 0, 0.2)",LAN="ZH"):"ja"==navigator.language?(t.children[0].style.color="rgba(0, 0, 0, 0.2)",n.children[0].style.color="rgba(0, 0, 0, 0.2)",a.children[0].style.color="rgba(0, 0, 0, 1)",LAN="JP"):(t.children[0].style.color="rgba(0, 0, 0, 1)",n.children[0].style.color="rgba(0, 0, 0, 0.2)",a.children[0].style.color="rgba(0, 0, 0, 0.2)",LAN="EN")}function initConnectLayout(){connectBackground=newTexture(20,13,50,65,"bgIMG2.png",1,mainContent);let e=newUI("form",connectBackground);e.method="POST",e.action="https://formsubmit.co/d916904bf353e3c015ca657c77569c26",changeUIStatus(e,0,0,100,100);let t=newText(0,2,"Send Message to Ground",connectBackground);t.style.textAlign="center",t.style.position="absolute",t.style.width="100%",setTextSize(t,175);let n=newText(0,10.5,"(Send a message to me if you'd like to ask something or query for game assets)",connectBackground);n.style.textAlign="center",n.style.position="absolute",n.style.width="100%",setTextSize(n,82);var a=newUI("input",e);a.type="text",a.name="name",a.placeholder="Your name",a.style.pointerEvents="auto",a.style.fontFamily="Palatino Linotype",changeUIStatus(a,20,20,65,5);let i=newText(10,20.5,"Name: ",connectBackground);i.style.position="absolute";let o=newUI("input",e);o.type="text",o.name="email",o.style.pointerEvents="auto",changeUIStatus(o,20,28,65,5);let $=newText(10,29,"Email: ",connectBackground);$.style.position="absolute";let r=newUI("textarea",e);r.name="message",r.style.pointerEvents="auto",changeUIStatus(r,10,45,80,30);let l=newText(0,38,"Message",connectBackground);l.style.textAlign="center",l.style.position="absolute",l.style.width="100%";let s=newUI("input",e);s.type="submit",s.value="Send",s.style.pointerEvents="auto",changeUIStatus(s,45,85,10,8),connectText[0]=t,connectText[1]=n,connectText[2]=i,connectText[3]=$,connectText[4]=l,connectText[5]=s,connectText[6]=a,connectText[7]=o,connectText[8]=r}function initAllIMG(){IMG_PRELOAD("AllBlack.png"),IMG_PRELOAD("AllWhite.png"),IMG_PRELOAD("arrow2.png"),IMG_PRELOAD("Batsu2.png"),IMG_PRELOAD("bgIMG2.png"),IMG_PRELOAD("bookmark2.png"),IMG_PRELOAD("DayMorning.png"),IMG_PRELOAD("DayNight.png"),IMG_PRELOAD("DepthRecorder.png"),IMG_PRELOAD("fanhouse_fan2.png"),IMG_PRELOAD("fanhouse2.png"),IMG_PRELOAD("hill2.png"),IMG_PRELOAD("Lan2.png"),IMG_PRELOAD("man12.png"),IMG_PRELOAD("man22.png"),IMG_PRELOAD("manholder2.png"),IMG_PRELOAD("Menu2.png"),IMG_PRELOAD("Moon2.png"),IMG_PRELOAD("rope2.png"),IMG_PRELOAD("Sun2.png"),IMG_PRELOAD("title2.png"),IMG_PRELOAD("TitleIcon2.png"),IMG_PRELOAD("weighter2.png"),IMG_PRELOAD("CatCoffeeSimulator/actions.png"),IMG_PRELOAD("CatCoffeeSimulator/background.png"),IMG_PRELOAD("CatCoffeeSimulator/interactable.png"),IMG_PRELOAD("CatCoffeeSimulator/results.png"),IMG_PRELOAD("CatCoffeeSimulator/title.png"),IMG_PRELOAD("Escave/background.png"),IMG_PRELOAD("Escave/title.png"),IMG_PRELOAD("Escave/hint.png"),IMG_PRELOAD("Escave/interact.png"),IMG_PRELOAD("Escave/noway.png"),IMG_PRELOAD("Escave/rail.png"),IMG_PRELOAD("FamilyReunionDinner/background.png"),IMG_PRELOAD("FamilyReunionDinner/mission.png"),IMG_PRELOAD("FamilyReunionDinner/monster.png"),IMG_PRELOAD("FamilyReunionDinner/multiplay.png"),IMG_PRELOAD("FamilyReunionDinner/receipt.png"),IMG_PRELOAD("FamilyReunionDinner/title.png"),IMG_PRELOAD("GoToHeaven/background.png"),IMG_PRELOAD("GoToHeaven/bar.png"),IMG_PRELOAD("GoToHeaven/clock.png"),IMG_PRELOAD("GoToHeaven/end.png"),IMG_PRELOAD("GoToHeaven/title.png"),IMG_PRELOAD("GoToHeaven/train.png"),IMG_PRELOAD("MoreThanEyes/background.png"),IMG_PRELOAD("MoreThanEyes/friend.png"),IMG_PRELOAD("MoreThanEyes/maze.png"),IMG_PRELOAD("MoreThanEyes/readmind.png"),IMG_PRELOAD("MoreThanEyes/title.png"),IMG_PRELOAD("MoreThanEyes/wants.png"),IMG_PRELOAD("RadialBlur/background.png"),IMG_PRELOAD("RadialBlur/blurred.png"),IMG_PRELOAD("RadialBlur/origin.png"),IMG_PRELOAD("RadialBlur/title.png"),IMG_PRELOAD("羅針盤/羅針盤0h2.png"),IMG_PRELOAD("羅針盤/羅針盤1h2.png"),IMG_PRELOAD("羅針盤/羅針盤2h2.png"),IMG_PRELOAD("羅針盤/羅針盤in2.png")}
