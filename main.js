var root,mainContent,bgArr,bgTagArr,partsElement,UICanvas,canvasHeight,canvasWidth,websiteBGLayout,connectBackground,helperLayout,mapLayout,recorderText,manHolder,globalID=1,offFocusStength=.5,LAN="EN",mainContentA=1,p=new Array(3),isMouseDown=!1,mouseDownRingType=-1,mouseX=0,mouseY=0,size=50,h0r=.00167*size,h1r=.0026*size,h2r=.0036*size,out=.00494*size,mainContentT=0,mainContentB=.741,mainContentL=-.569,mainContentR=.545,isMasking=!1,curCardID=1,websiteBG=new Array(2),backgroundStatus=1,websiteBGInChanging=!1,connectText=new Array(9),helperText=new Array(3),WEB_CURRENT_TIME="2023/10/25",curDepth=WEB_CURRENT_TIME,worldTime=0,worldTargetTime=0,moveSpeed=1,downSpeed=.2,groundDepth=17.5,daySkippingSpeedMax=100,weighterTargetHeight=new Array,recorderShowType=2;function main(){initAllIMG(),root=document.getElementById("root"),canvasHeight=window.innerHeight,canvasWidth=window.innerWidth,newTexture(0,0,100,100,"AllWhite.png",1,root),websiteBGLayout=newUI(null,root),changeUIStatus(websiteBGLayout,0,0,100,100),websiteBG[0]=newTexture(0,0,100,100,"bgIMG2.png",1,websiteBGLayout),websiteBG[1]=newTexture(0,0,100,100,"bgIMG2.png",1,websiteBGLayout),helperLayout=newUI(null,root),changeUIStatus(helperLayout,0,0,100,100),mainContent=newUI(null,root),changeUIStatus(mainContent,0,0,100,100),UICanvas=newUI(null,root),changeUIStatus(UICanvas,0,0,100,100),UICanvas.style.pointerEvents="none",init(),initPartsElementOnCard(),initRashinban(),initMouseRashinbanAniamtion(),initMainContentAnimation(),initUICanvasAnimation(),initMap(),initTitle(),initLANChange(),initConnectLayout(),setVisible(p[1].layout,!1),setVisible(p[2].layout,!1),setVisible(mainContent,!1),rashinbanJumpTo([0]),LANSwitch()}async function init(){bgArr=new Array(4),bgTagArr=new Array(4);let e=["Overview","Scene","Video","Comment"];for(let t=0;t<bgArr.length;t+=1){let n=newTexture(20+1*t,13-1*t,50,65,"bgIMG2.png",1,mainContent);n.style.boxShadow="0px 0px 20px 10px rgba(0,0,0,0.5)",n.style.pointerEvents="auto",n.style.userSelect="none";let a=newTButton(7.5*t,-10,10,15,e[t],"bookmark2.png",1,n);a.children[0].style.top="40%",bgArr[t]=n,bgTagArr[t]=a,a.onclick=function(){let e=t;for(let t=0;t<bgArr.length;t+=1)t<e?(changeUIStatus(bgArr[t],20+1*t+1*bgArr.length,13-(1*t+1*bgArr.length),50,65),changeUIStatus(bgTagArr[t],90-7.5*t,-10,10,15)):(changeUIStatus(bgArr[t],20+1*t,13-1*t,50,65),changeUIStatus(bgTagArr[t],7.5*t,-10,10,15),bgTagArr[t].style.transform="scaleX(1)");for(let t=e;t>=0;t-=1)mainContent.appendChild(bgArr[t]);for(let t=bgArr.length-1;t>=e;t-=1)mainContent.appendChild(bgArr[t]);partsElement.overview.pic.style.visibility=0==e?"inherit":"hidden"}}rearrangeOrder()}function rearrangeOrder(){for(let e=0;e<bgArr.length;e+=1)mainContent.appendChild(bgArr[bgArr.length-e-1]);for(let e=0;e<bgArr.length;e+=1)changeUIStatus(bgArr[e],20+1*e,13-1*e,50,65),changeUIStatus(bgTagArr[e],7.5*e,-10,10,15),bgTagArr[e].style.transform="scaleX(1)"}function initPartsElementOnCard(){let e=bgArr[0].offsetWidth/bgArr[0].offsetHeight;partsElement={overview:{pic:newTexture(75,0,25,25*e,"RadialBlur/title.png",1,bgArr[0]),title:newText(-12.5,12.5,"Radial Blur",bgArr[0]),text:newText(5,35,"<p>Radial blur is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>",bgArr[0])},scene:[{pic:newTButton(12.5,12.5,32,20*e,"","RadialBlur/title.png",1,bgArr[1]),title:newText(0,-20,"Radial Blur",bgArr[1]),text:"<p>Radial blur 1 is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>"},{pic:newTButton(55.5,12.5,32,20*e,"","RadialBlur/title.png",1,bgArr[1]),title:newText(0,-20,"Radial Blur",bgArr[1]),text:"<p>Radial blur 2 is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>"},{pic:newTButton(12.5,85-20*e,32,20*e,"","RadialBlur/title.png",1,bgArr[1]),title:newText(0,-20,"Radial Blur",bgArr[1]),text:"<p>Radial blur 3 is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>"},{pic:newTButton(55.5,85-20*e,32,20*e,"","RadialBlur/title.png",1,bgArr[1]),title:newText(0,-20,"Radial Blur",bgArr[1]),text:"<p>Radial blur 4 is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>"}],video:{link:newVideo(17.5,15,65,36.5625*e,"",bgArr[2]),text:newText(0,15+36.5625*e+10,"An animation using hammer to illustate the radial blur's effect",bgArr[2])},comment:newText(10,10,"<p>Radial blur is a screen based post-processing effect. It's a efficient way to enhance the vision effect.</p><p>This effect can use in strong impact effect, like hitting and explosion effect.</p>",bgArr[3])},setTextSize(partsElement.overview.title,300),partsElement.overview.title.style.textAlign="center",partsElement.overview.text.style.maxWidth="90%",setTextSize(partsElement.overview.text,120);for(let e=0;e<4;e+=1)partsElement.scene[e].pic.appendChild(partsElement.scene[e].title),partsElement.scene[e].pic.onclick=function(){isMasking=!0;let t=newBackground(0,0,100,100,0,0,0,0,root),n=newTButton(0,0,100,100,"","AllBlack.png",.8,t);n.style.cursor="auto",n.onclick=function(){destroy(t),isMasking=!1};newTButton(96,2,1.5,1.5*canvasWidth/canvasHeight,"","Batsu2.png",1,t);t.onclick=function(){destroy(t),isMasking=!1};let a=partsElement.scene[e].pic.style.backgroundImage.substring(4,partsElement.scene[e].pic.style.backgroundImage.length-1),i=(newTexture(5,(100-35*canvasWidth/canvasHeight)/2,56,35*canvasWidth/canvasHeight,a,1,t),newTexture(66,(100-35*canvasWidth/canvasHeight)/2,25,35*canvasWidth/canvasHeight,"bgIMG2.png",1,t)),r=newText(0,7,partsElement.scene[e].title.innerHTML,i);r.style.textAlign="center",setTextSize(r,150),newText(10,15,partsElement.scene[e].text,i).style.maxWidth="80%"},partsElement.scene[e].title.style.textAlign="center",setTextSize(partsElement.scene[e].title,120),partsElement.video.text.style.textAlign="center",setTextSize(partsElement.video.text,.5/(partsElement.video.text.offsetWidth/canvasWidth)*100),partsElement.video.text.style.whiteSpace="nowrap",partsElement.comment.style.maxWidth="80%"}function drawCard(e){partsElement.overview.pic.style.backgroundImage="url("+e.overview.pic+")",partsElement.overview.pic.style.visibility="inherit",partsElement.overview.title.innerHTML=e.overview.title,partsElement.overview.text.innerHTML=e.overview.text;for(let t=0;t<4;t+=1)t<e.scene.length?(partsElement.scene[t].pic.style.visibility="inherit",partsElement.scene[t].title.style.visibility="inherit",partsElement.scene[t].pic.style.backgroundImage="url("+e.scene[t].pic+")",partsElement.scene[t].title.innerHTML=e.scene[t].title,partsElement.scene[t].text=e.scene[t].text):(partsElement.scene[t].pic.style.visibility="hidden",partsElement.scene[t].title.style.visibility="hidden");partsElement.video.link.src=e.video.link,partsElement.video.text.innerHTML=e.video.text,partsElement.comment.innerHTML=e.comment}function initRashinban(){pIn=newTexture(50-size/canvasWidth*canvasHeight/2,100-size/2-0,size/canvasWidth*canvasHeight,size,"羅針盤/羅針盤in2.png",.8,root),p[0]={layout:newTexture(50-size/canvasWidth*canvasHeight/2,100-size/2-0,size/canvasWidth*canvasHeight,size,"羅針盤/羅針盤0h2.png",.8,root),degree:0,curTag:"",tag:null,a:.8},p[1]={layout:newTexture(50-size/canvasWidth*canvasHeight/2,100-size/2-0,size/canvasWidth*canvasHeight,size,"羅針盤/羅針盤1h2.png",.8,UICanvas),degree:0,curTag:"",tag:null,a:.8},p[2]={layout:newTexture(50-size/canvasWidth*canvasHeight/2,100-size/2-0,size/canvasWidth*canvasHeight,size,"羅針盤/羅針盤2h2.png",.8,UICanvas),degree:0,curTag:"",tag:null,a:.8};let e=0,t=0,n=0,a=0,i=-1;onmousedown=function(r){if(isMasking)return;null!=r.touches&&(r=r.touches[0]),isMouseDown=!0,n=(r.clientX-canvasWidth/2)/canvasWidth/.5/1536*canvasWidth,a=r.clientY/canvasHeight,e=n,t=a;let o=distance(n,a,0,1);h0r<o&&o<h1r?i=0:h1r<o&&o<h2r?i=1:h2r<o&&o<out&&(i=2),mouseDownRingType=i},onmousemove=function(e){if(isMasking)return;if(null!=e.touches&&(e=e.touches[0]),mouseX=(e.clientX-canvasWidth/2)/canvasWidth/.5/1536*canvasWidth,mouseY=e.clientY/canvasHeight,-1==i||"hidden"==p[i].layout.style.visibility)return;distance(mouseX,mouseY,0,1);let t=180*Math.atan2(1-a,0-n)/Math.PI,r=180*Math.atan2(1-mouseY,0-mouseX)/Math.PI,o=r<0&&t>0||r>0&&t<0?r+t:r-t,l=p[i].degree;p[i].degree=clamp(p[i].degree+o,45*-p[i].tag.length,0),p[i].layout.style.transform="rotate("+p[i].degree+"deg)",n=mouseX,a=mouseY,worldTargetTime+=Math.abs(p[i].degree-l)/360*100*moveSpeed,rashinbanDetector(i)},onmouseup=function(n){if(isMasking)return;null!=n.touches&&(n=n.touches[0]);let a=Math.abs(e-(n.clientX-canvasWidth/2)/canvasWidth/.5/1536*canvasWidth),r=Math.abs(t-n.clientY/canvasHeight);if(a<.005&&r<.005&&-1!=i&&"hidden"!=p[i].layout.style.visibility){let n=90-180*Math.atan2(1-t,0-e)/Math.PI;45*-p[i].tag.length<=p[i].degree+n&&p[i].degree+n<=0&&(p[i].degree+=n,p[i].layout.style.transform="rotate("+p[i].degree+"deg)",rashinbanDetector(i))}i=-1,isMouseDown=!1,mouseDownRingType=-1},ontouchstart=onmousedown,ontouchmove=onmousemove,ontouchend=onmouseup,drawNameTagOnRing(0,getData())}function rashinbanDetector(e){let t=getData();for(let n=0;n<e;n+=1)t=t[Math.floor(Math.abs(p[n].degree)/45)].data,setVisible(p[n+1].layout,!0);for(let n=e;n<p.length;n+=1){if(!(1.8<Math.abs(p[n].degree)%45&&Math.abs(p[n].degree)%45<43.2)){p[n].curTag="",setVisible(mainContent,!1);for(let e=n;e<p.length-1;e+=1)p[e+1].degree=0,p[e+1].layout.style.transform="rotate(0deg)",setVisible(p[e+1].layout,!1);break}{let e=Math.floor(Math.abs(p[n].degree)/45);if(p[n].curTag==t[e].name){for(let e=n;e<p.length-1&&"hidden"!=p[e+1].layout.style.visibility;e+=1)Math.abs(p[e].degree)%45<10?p[e+1].layout.style.opacity=lerp1(0,.8,(Math.abs(p[e].degree)%45-1.8)/10)*p[e].a/.8:35<Math.abs(p[e].degree)%45?p[e+1].layout.style.opacity=lerp1(.8,0,(Math.abs(p[e].degree)%45-35)/8.2)*p[e].a/.8:p[e+1].layout.style.opacity=p[e].a,p[e+1].a=parseFloat(p[e+1].layout.style.opacity);if(t[e].isACard){let e=.6;Math.abs(p[n].degree)%45<10?mainContent.style.opacity=lerp1(0,e,(Math.abs(p[n].degree)%45-1.8)/10)*p[n].a/.8:35<Math.abs(p[n].degree)%45?mainContent.style.opacity=lerp1(e,0,(Math.abs(p[n].degree)%45-35)/8.2)*p[n].a/.8:mainContent.style.opacity=e,mainContentA=parseFloat(mainContent.style.opacity)}return}p[n].curTag=t[e].name;for(let e=n;e<p.length-1;e+=1)p[e+1].degree=0,p[e+1].layout.style.transform="rotate(0deg)",setVisible(p[e+1].layout,!1);t[e].isACard?t[e].isAMessage?curCardID!=t[e].cardID&&("Intro"==t[e].name&&(backgroundChanges("bgIMG2.png"),animateAlpha(helperLayout,0,1,1)),"Connect"==t[e].name&&(connectBackground.style.visibility="visible"),curCardID=t[e].cardID):(setVisible(mainContent,!0),curCardID!=t[e].cardID&&(curCardID=t[e].cardID,rearrangeOrder(),drawCard(t[e].data),backgroundChanges(t[e].data.background))):(p[n+1].degree=0,p[n+1].layout.style.transform="rotate(0deg)",setVisible(p[n+1].layout,!0),setVisible(mainContent,!1),drawNameTagOnRing(n+1,t[e].data)),helperLayout.style.visibility="Intro"==t[e].name?"inherit":"hidden",connectBackground.style.visibility="Connect"==t[e].name?"visible":"hidden";let a=dateDistance(curDepth,t[e].depth);worldTargetTime+=parseFloat(Math.abs(a))*downSpeed,curDepth="N/A"==t[e].depth?curDepth:t[e].depth,weighterTargetHeight.push(parseFloat(a)),t=t[e].data}}for(let t=e;t<p.length;t+=1)for(let e=0;null!=p[t].tag&&e<p[t].tag.length;e+=1)e==Math.floor(Math.abs(p[t].degree)/45)&&1.8<Math.abs(p[t].degree)&&Math.abs(p[t].degree)%45<43.2?p[t].tag[e].style.color="rgb(0, 0, 0, 1)":p[t].tag[e].style.color="rgb(0, 0, 0, 0.5)"}function backgroundChanges(e){if(websiteBGInChanging)return void(-1==backgroundStatus?websiteBG[0].style.backgroundImage='url("'+e+'")':websiteBG[1].style.backgroundImage='url("'+e+'")');websiteBGInChanging=!0;let t=1==backgroundStatus?websiteBG[0]:websiteBG[1],n=1==backgroundStatus?websiteBG[1]:websiteBG[0];t.style.backgroundImage="url("+e+")",websiteBGLayout.appendChild(t),animateAlpha(n,1,0,.75,"easeInQuart",function(){n.style.backgroundImage='url("")',n.style.opacity=1,websiteBGInChanging=!1}),animateTransform(t,{x0:0,x1:0,y0:100,y1:0},{x0:100,x1:100,y0:100,y1:100},.75),backgroundStatus=-backgroundStatus}function drawNameTagOnRing(e,t){if(null!=p[e].tag){for(let t=0;t<p[e].tag.length;t+=1)destroy(p[e].tag[t]);p[e].tag=null}let n=0;n=0==e?.235:1==e?.3525:.48,p[e].tag=new Array(t.length);for(let a=0;a<t.length;a+=1){let i=91.06*n,r=i*Math.cos(toRadians(90-(10+45*a)))+50.5,o=-i*Math.sin(toRadians(90-(10+45*a)))+47.5,l=newText(r,o,"<b>"+t[a].showName+"</b>",p[e].layout);l.style.position="absolute",l.style.transformOrigin="0%",l.style.transform="rotate("+(22.5+45*a)+"deg)",l.style.whiteSpace="nowrap";let s=canvasHeight/747;setTextSize(l,Math.min(4050/l.clientWidth*s*(1+.45*e),90*(1+.05*e))),p[e].tag[a]=l,p[e].tag[a].text=t[a].name}}function initMouseRashinbanAniamtion(){if(isMasking)return;let e=new Array(3);var t=function(){e=[!1,!1,!1];let n=distance(mouseX,mouseY,0,1),a=-1;-1!=mouseDownRingType?a=mouseDownRingType:h0r<n&&n<h1r?a=0:h1r<n&&n<h2r?a=1:h2r<n&&n<out&&(a=2),-1!=a&&"hidden"!=p[a].layout.style.visibility&&(e[a]=!0);for(let t=0;t<e.length;t+=1)"hidden"!=p[t].layout.style.visibility&&(e[t]?p[t].layout.style.opacity=Math.min(parseFloat(p[t].layout.style.opacity)+.05,.8):p[t].layout.style.opacity=Math.max(parseFloat(p[t].layout.style.opacity)-.05,p[t].a));requestAnimationFrame(t)};t()}function initMainContentAnimation(){var e=function(){let t=mainContentL<=mouseX&&mouseX<=mainContentR&&mainContentT<=mouseY&&mouseY<=mainContentB;mainContent.style.opacity=t?Math.min(parseFloat(mainContent.style.opacity)+.05,1):Math.max(parseFloat(mainContent.style.opacity)-.05,mainContentA),requestAnimationFrame(e)};e()}function initUICanvasAnimation(){var e=function(){let t=mainContentL<=mouseX&&mouseX<=mainContentR&&mainContentT<=mouseY&&mouseY<=mainContentB;UICanvas.style.opacity=t?Math.max(parseFloat(UICanvas.style.opacity)-.05,.25):Math.min(parseFloat(UICanvas.style.opacity)+.05,1),requestAnimationFrame(e)};e()}function initMap(){mapLayout=newUI(null,UICanvas),changeUIStatus(mapLayout,85,20,15,70),mapLayout.style.overflow="hidden",mapLayout.style.boxShadow="0px 0px 20px 10px rgba(0, 0, 0, 0.5)";let e=mapLayout.offsetWidth/mapLayout.offsetHeight;initBackground();newTexture(34,17,70,70*e,"hill2.png",1,mapLayout);initShortcutOnMap(),initDepthMarker(),initHouseAndFan(),initDepthRecorder()}function initBackground(){let e=newUI(null,mapLayout),t=mapLayout.offsetWidth/mapLayout.offsetHeight;changeUIStatus(e,0,0,100,100);let n=newTexture(0,0,100,100,"DayMorning.png",1,e),a=newTexture(0,0,100,100,"DayNight.png",1,e);a.style.opacity=0;let i=newTexture(5,5,12.5,12.5*t,"Sun2.png",1,e),r=newTexture(5,5,12.5,12.5*t,"Moon2.png",1,e);r.style.opacity=0;var o=function(){let t=worldTime%100;0<t&&t<5?(i.style.opacity=1,n.style.opacity=1,a.style.opacity=0):45<t&&t<50?(n.style.opacity=lerp1(1,0,(t-45)/5),a.style.opacity=lerp1(0,1,(t-45)/5),i.style.opacity=0,e.appendChild(a),e.appendChild(r)):50<t&&t<55?(r.style.opacity=1,n.style.opacity=0,a.style.opacity=1):95<t&&t<100&&(n.style.opacity=lerp1(0,1,(t-95)/5),a.style.opacity=lerp1(1,0,(t-95)/5),r.style.opacity=0,e.appendChild(n),e.appendChild(i)),worldTime!=worldTargetTime&&(worldTime=Math.min(worldTime+daySkippingSpeedMax/60,worldTargetTime)),i.style.top=getSunMoonHeight(t%50)+"%",i.style.left=lerp1(0,100,t%50/50)+"%",r.style.top=getSunMoonHeight(t%50)+"%",r.style.left=lerp1(0,100,t%50/50)+"%",worldTargetTime+=.05,requestAnimationFrame(o)};o()}function initHouseAndFan(){let e=mapLayout.offsetWidth/mapLayout.offsetHeight,t=groundDepth-30*e/2,n=(newTexture(55,groundDepth-35*e/2,25,25*e,"fanhouse2.png",1,mapLayout),newTexture(55,groundDepth-25*e,25,25*e,"fanhouse_fan2.png",1,mapLayout)),a=0,i=0;newTexture(25,.9*t,30,30*e,"weighter2.png",1,mapLayout).style.transform="scaleX(-1)";let r=newTexture(22.5,groundDepth-7.25*e,10,7.25*e,"rope2.png",1,mapLayout),o=newTexture(24.5,groundDepth,6,6*e,"man12.png",1,mapLayout);manHolder=newTexture(22.5,groundDepth,10,10*e,"manholder2.png",1,mapLayout);var l=function(){a+=.25,n.style.transform="rotate("+a+"deg)";let t=0;if(weighterTargetHeight.length>0){let e=daySkippingSpeedMax/downSpeed/60;t=weighterTargetHeight[0]<0?-Math.min(Math.abs(weighterTargetHeight[0]),e):Math.min(Math.abs(weighterTargetHeight[0]),e),weighterTargetHeight[0]=weighterTargetHeight[0]<0?Math.min(weighterTargetHeight[0]+e,0):Math.max(weighterTargetHeight[0]-e,0),0==weighterTargetHeight[0]&&weighterTargetHeight.splice(0,1)}let s=parseFloat(manHolder.style.top)-t/1e4*(100-groundDepth);r.style.height=7.25*e*(1+(s-groundDepth)/(7.25*e))+"%",manHolder.style.top=s+"%",o.style.top=s+6*e*.25+"%",o.style.backgroundImage=i%2<1?"url(man12.png)":"url(man22.png)",i+=.0167,requestAnimationFrame(l)};l()}function initDepthMarker(){let e=groundDepth,t=new Array(5);t[0]=newText(5,e,"— &nbsp0000",mapLayout),setTextSize(t[0],60),t[0].style.color="rgba(0, 0, 0, 0.5)";for(let n=1;n<=4;n+=1)e+=(80-groundDepth)/5,t[n]=newText(5,e,"— "+-2e3*n,mapLayout),setTextSize(t[n],75),t[n].style.color="rgba(0, 0, 0, 0.5)";var n=function(){let e=worldTime%100;if(95<e&&e<100){let n=lerp3({x:0,y:1,z:0},{x:0,y:0,z:0},(e-95)/5);for(let e=0;e<=4;e+=1)t[e].style.color="rgba("+255*n.x+", "+255*n.y+", "+255*n.z+", 0.5)"}else if(0<e&&e<40)for(let e=0;e<=4;e+=1)t[e].style.color="rgba(0, 0, 0, 0.5)";else if(45<e&&e<50){let n=lerp3({x:0,y:0,z:0},{x:0,y:1,z:0},(e-45)/5);for(let e=0;e<=4;e+=1)t[e].style.color="rgba("+255*n.x+", "+255*n.y+", "+255*n.z+", 0.5)"}else if(50<e&&e<90)for(let e=0;e<=4;e+=1)t[e].style.color="rgba(0, 255, 0, 0.5)";requestAnimationFrame(n)};n()}function initDepthRecorder(){let e=newBackground(85,10,15,10,1,1,1,1,UICanvas);e.style.boxShadow="0px 0px 20px 10px rgba(0,0,0,0.5)",recorderText=newText(2,2,"Content's Publish Date:",e),setTextSize(recorderText,90);let t=new Array(10),n=new Array(10),a=WEB_CURRENT_TIME;for(let i=0;i<10;i+=1)t[i]=newTexture(5.5+9*i,40,8,50,"DepthRecorder.png",1,e),n[i]=newText(0,22.5,a[i],t[i]),n[i].style.textAlign="center",n[i].style.color="rgb(0, 200, 0)";let i={EN:"Current Depth:",ZH:"当前深度：",JP:"深さ："},r={EN:"Content's Publish Date:",ZH:"内容的发表日期：",JP:"内容の発表日："},o="   00000 M",l="";var s=function(){let t=worldTime%100;if(95<t&&t<100){let n=lerp3({x:37,y:61,z:168},{x:255,y:255,z:255},(t-95)/5),a=lerp3({x:0,y:255,z:0},{x:0,y:0,z:0},(t-95)/5);e.style.backgroundColor="rgb("+n.x+", "+n.y+", "+n.z+")",recorderText.style.color="rgb("+a.x+", "+a.y+", "+a.z+")"}else if(0<t&&t<40)e.style.backgroundColor="rgb(255, 255, 255)",recorderText.style.color="rgb(0, 0, 0)";else if(45<t&&t<50){let n=lerp3({x:255,y:255,z:255},{x:37,y:61,z:168},(t-45)/5),a=lerp3({x:0,y:0,z:0},{x:0,y:255,z:0},(t-45)/5);e.style.backgroundColor="rgb("+n.x+", "+n.y+", "+n.z+")",recorderText.style.color="rgb("+a.x+", "+a.y+", "+a.z+")"}else 50<t&&t<90&&(e.style.backgroundColor="rgb(37, 61, 168)",recorderText.style.color="rgb(0, 222, 0)");let a=parseInt(lerp1(0,1e4,(parseFloat(manHolder.style.top)-groundDepth)/(100-groundDepth)));for(let e=(a+"").length;e<5;e+=1)a="0"+a;if(o="00000"==a?"   "+a+" M":"  -"+a+" M",l=curDepth,1==recorderShowType)for(let e=0;e<10;e+=1)recorderText.innerHTML=i[LAN],n[e].innerHTML=o.charAt(e),n[e].style.color="rgb(0, 0, 0)";else for(let e=0;e<10;e+=1)recorderText.innerHTML=r[LAN],n[e].innerHTML=l.charAt(e),n[e].style.color="rgb(0, 222, 0)";requestAnimationFrame(s)};s(),newTButton(0,0,100,100,"","AllWhite.png",0,e).onclick=function(){recorderShowType=1==recorderShowType?2:1}}function initShortcutOnMap(){let e=mapLayout.offsetWidth/mapLayout.offsetHeight,t=(100-groundDepth)/20/e,n=new Array,a=getData(),i=new Array;for(let e=0;e<a.length;e+=1)i.push({content:a[e],jumpStringIndex:e+""});for(;0!=i.length;){let e=i.splice(i.length-1,1)[0],t=e.content,a=e.jumpStringIndex;if("N/A"==t.depth){if(Array.isArray(t.data))for(let e=0;e<t.data.length;e+=1)i.push({content:t.data[e],jumpStringIndex:a+e})}else{if(0==n.length){n.push({content:t,jumpStringIndex:a});continue}for(let e=0;e<n.length;e+=1){if(parseFloat(dateDistance(t.depth,n[e].content.depth))<0){n.splice(e,0,{content:t,jumpStringIndex:a});break}if(e==n.length-1){n.push({content:t,jumpStringIndex:a+e});break}}}}for(let a=0,i=0;a<=15&&i<n.length;a+=1){let r=Math.abs(parseFloat(getDepth(n[i].content.depth)));for(let o=0;a<2&&o<1||a>=2&&o<4;o+=1){if(i==n.length)return;if(!(a*(1e4/15)<=r&&r<(a+1)*(1e4/15)))break;{let a=lerp1(groundDepth,100,Math.abs(parseFloat(getDepth(n[i].content.depth)))/1e4),r=newTButton(25+15*o,a,t,t*e,"",n[i].content.data.overview.pic,1,mapLayout),l=i;r.onclick=function(){let e=new Array;for(let t=0;t<n[l].jumpStringIndex.length;t+=1)e.push(n[l].jumpStringIndex.charAt(t));rashinbanJumpTo(e)},i+=1}}}}function rashinbanJumpTo(e){for(let t=0;t<e.length;t+=1)p[t].degree=-(22.5+45*e[t]),p[t].layout.style.transform="rotate("+p[t].degree+"deg)",rashinbanDetector(t);for(let e=0;e<3;e+=1)p[e].a=.8}function initTitle(){let e=newTexture(0,0,15,18,"bgIMG2.png",.5,root);newTexture(0,0,15,18,"title2.png",1,root);e.style.boxShadow="0px 0px 20px 10px rgba(0,0,0,0.5)";let t=newTexture(0,96.5,4.5/canvasWidth*1536,3.5,"AllBlack.png",1,root),n=newText(0,0,"&copy; 2023 Ili",t);n.style.position="absolute",n.style.color="rgba(255, 255, 0, 1)",n.style.whiteSpace="nowrap",setTextSize(n,100);newTexture(46.25,72.5,7.5,10.25,"arrow2.png",.5,helperLayout);newTexture(76,28,7.5,10.25,"arrow2.png",.5,helperLayout).style.transform="rotate(270deg)";let a=newTexture(25,20,30,20,"",1,helperLayout),i=newText(0,0,"<p>Welcome to Abyss of Ili!</p><p>As a cave raider, you will go down into the cave to explore the unknowns.</p><p>The door is open for you. Come and enjoy your life in Abyss of Ili!</p>",a);setTextSize(i,120);let r=newTexture(40,60,20,20,"",1,helperLayout),o=newText(0,0,"※ <u>Rotate</u>(<u>Drag</u>) or <u>Click</u> the ring on the compass to go to each page in this website",r);setTextSize(o,100),o.style.color="rgb(0, 200, 0)";let l=newTexture(67.5,35,15,10,"",1,helperLayout),s=newText(0,0,"※ You can <u>click</u> the small Icon on the Menu map to <u>DIRECTLY</u> go to each content",l);setTextSize(s,100),s.style.color="rgb(0, 200, 0)",helperText[0]=i,helperText[1]=o,helperText[2]=s;newTexture(85.875,3,13.5,6,"Menu2.png",1,UICanvas);let p=newTexture(74,29.5,3,3*canvasWidth/canvasHeight,"man12.png",.5,helperLayout),g=0;var c=function(){p.style.backgroundImage=g%2<1?"url(man12.png)":"url(man22.png)",g+=.0167,requestAnimationFrame(c)};c()}function initLANChange(){let e=newBackground(0,20,10,5,.87,.87,0,.5,root);e.style.boxShadow="0px 0px 20px 10px rgba(0,0,0,0.5)",newTexture(0,0,100,100,"Lan2.png",1,newBackground(2,20,15,60,.5,.5,0,1,e));let t=newBButton(20,0,23,100,"Eng",.87,.87,0,1,e),n=newBButton(46,0,23,100,"中",.87,.87,0,1,e),a=newBButton(72,0,23,100,"日",.87,.87,0,1,e);t.children[0].style.top="20%",n.children[0].style.top="27%",a.children[0].style.top="27%",t.children[0].style.fontFamily="Palatino Linotype",n.children[0].style.fontFamily="KaiTi",a.children[0].style.fontFamily="UD Digi Kyokasho NP-R",t.onclick=function(){t.children[0].style.color="rgba(0, 0, 0, 1)",n.children[0].style.color="rgba(0, 0, 0, 0.2)",a.children[0].style.color="rgba(0, 0, 0, 0.2)",LAN="EN",LANSwitch()},n.onclick=function(){t.children[0].style.color="rgba(0, 0, 0, 0.2)",n.children[0].style.color="rgba(0, 0, 0, 1)",a.children[0].style.color="rgba(0, 0, 0, 0.2)",LAN="ZH",LANSwitch()},a.onclick=function(){t.children[0].style.color="rgba(0, 0, 0, 0.2)",n.children[0].style.color="rgba(0, 0, 0, 0.2)",a.children[0].style.color="rgba(0, 0, 0, 1)",LAN="JP",LANSwitch()},"zh-CN"==navigator.language||"zh"==navigator.language?(t.children[0].style.color="rgba(0, 0, 0, 0.2)",n.children[0].style.color="rgba(0, 0, 0, 1)",a.children[0].style.color="rgba(0, 0, 0, 0.2)",LAN="ZH"):"ja"==navigator.language?(t.children[0].style.color="rgba(0, 0, 0, 0.2)",n.children[0].style.color="rgba(0, 0, 0, 0.2)",a.children[0].style.color="rgba(0, 0, 0, 1)",LAN="JP"):(t.children[0].style.color="rgba(0, 0, 0, 1)",n.children[0].style.color="rgba(0, 0, 0, 0.2)",a.children[0].style.color="rgba(0, 0, 0, 0.2)",LAN="EN")}function initConnectLayout(){connectBackground=newTexture(20,13,50,65,"bgIMG2.png",1,mainContent);let e=newUI("form",connectBackground);e.method="POST",e.action="https://formsubmit.co/d916904bf353e3c015ca657c77569c26",changeUIStatus(e,0,0,100,100);let t=newText(0,2,"Send Message to Ground",connectBackground);t.style.textAlign="center",t.style.position="absolute",t.style.width="100%",setTextSize(t,175);let n=newText(0,10.5,"(Send a message to me if you'd like to ask something or query for game assets)",connectBackground);n.style.textAlign="center",n.style.position="absolute",n.style.width="100%",setTextSize(n,82);var a=newUI("input",e);a.type="text",a.name="name",a.placeholder="Your name",a.style.pointerEvents="auto",a.style.fontFamily="Palatino Linotype",changeUIStatus(a,20,20,65,5);let i=newText(10,20.5,"Name: ",connectBackground);i.style.position="absolute";let r=newUI("input",e);r.type="text",r.style.pointerEvents="auto",changeUIStatus(r,20,28,65,5);let o=newText(10,29,"Email: ",connectBackground);o.style.position="absolute";let l=newUI("textarea",e);l.name="message",l.style.pointerEvents="auto",changeUIStatus(l,10,45,80,30);let s=newText(0,38,"Message",connectBackground);s.style.textAlign="center",s.style.position="absolute",s.style.width="100%";let p=newUI("input",e);p.type="submit",p.value="Send",p.style.pointerEvents="auto",changeUIStatus(p,45,85,10,8),connectText[0]=t,connectText[1]=n,connectText[2]=i,connectText[3]=o,connectText[4]=s,connectText[5]=p,connectText[6]=a,connectText[7]=r,connectText[8]=l}function initAllIMG(){IMG_PRELOAD("AllBlack.png"),IMG_PRELOAD("AllWhite.png"),IMG_PRELOAD("arrow2.png"),IMG_PRELOAD("Batsu2.png"),IMG_PRELOAD("bgIMG2.png"),IMG_PRELOAD("bookmark2.png"),IMG_PRELOAD("DayMorning.png"),IMG_PRELOAD("DayNight.png"),IMG_PRELOAD("DepthRecorder.png"),IMG_PRELOAD("fanhouse_fan2.png"),IMG_PRELOAD("fanhouse2.png"),IMG_PRELOAD("hill2.png"),IMG_PRELOAD("Lan2.png"),IMG_PRELOAD("man12.png"),IMG_PRELOAD("man22.png"),IMG_PRELOAD("manholder2.png"),IMG_PRELOAD("Menu2.png"),IMG_PRELOAD("Moon2.png"),IMG_PRELOAD("rope2.png"),IMG_PRELOAD("Sun2.png"),IMG_PRELOAD("title2.png"),IMG_PRELOAD("TitleIcon2.png"),IMG_PRELOAD("weighter2.png"),IMG_PRELOAD("CatCoffeeSimulator/actions.png"),IMG_PRELOAD("CatCoffeeSimulator/background.png"),IMG_PRELOAD("CatCoffeeSimulator/interactable.png"),IMG_PRELOAD("CatCoffeeSimulator/results.png"),IMG_PRELOAD("CatCoffeeSimulator/title.png"),IMG_PRELOAD("Escave/background.png"),IMG_PRELOAD("Escave/title.png"),IMG_PRELOAD("Escave/hint.png"),IMG_PRELOAD("Escave/interact.png"),IMG_PRELOAD("Escave/noway.png"),IMG_PRELOAD("Escave/rail.png"),IMG_PRELOAD("FamilyReunionDinner/background.png"),IMG_PRELOAD("FamilyReunionDinner/mission.png"),IMG_PRELOAD("FamilyReunionDinner/monster.png"),IMG_PRELOAD("FamilyReunionDinner/multiplay.png"),IMG_PRELOAD("FamilyReunionDinner/receipt.png"),IMG_PRELOAD("FamilyReunionDinner/title.png"),IMG_PRELOAD("GoToHeaven/background.png"),IMG_PRELOAD("GoToHeaven/bar.png"),IMG_PRELOAD("GoToHeaven/clock.png"),IMG_PRELOAD("GoToHeaven/end.png"),IMG_PRELOAD("GoToHeaven/title.png"),IMG_PRELOAD("GoToHeaven/train.png"),IMG_PRELOAD("MoreThanEyes/background.png"),IMG_PRELOAD("MoreThanEyes/friend.png"),IMG_PRELOAD("MoreThanEyes/maze.png"),IMG_PRELOAD("MoreThanEyes/readmind.png"),IMG_PRELOAD("MoreThanEyes/title.png"),IMG_PRELOAD("MoreThanEyes/wants.png"),IMG_PRELOAD("RadialBlur/background.png"),IMG_PRELOAD("RadialBlur/blurred.png"),IMG_PRELOAD("RadialBlur/origin.png"),IMG_PRELOAD("RadialBlur/title.png"),IMG_PRELOAD("羅針盤/羅針盤0h2.png"),IMG_PRELOAD("羅針盤/羅針盤1h2.png"),IMG_PRELOAD("羅針盤/羅針盤2h2.png"),IMG_PRELOAD("羅針盤/羅針盤in2.png")}